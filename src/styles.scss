@use "assets/sass/core";

:root {
  --p-button-primary-background: var(--primary-color);
  --p-button-primary-border-color: var(--primary-color);
  --p-inputtext-focus-border-color: var(--primary-color);
  --p-button-primary-hover-background: var(--primary-color);
  --p-button-primary-hover-border-color: var(--primary-color);
  --p-button-primary-active-background: var(--neutral-color);
  --p-button-primary-active-border-color: var(--neutral-color);
  --p-dialog-color: var(--font-color);
  --p-button-outlined-secondary-color: var(--font-color);
  --p-dialog-background: var(--background-color);

  --scrollbar-bg: rgba(0, 0, 0, 0);
  --scrollbar-thumb-bg: var(--primary-color);
  --scrollbar-thumb-hover: #2980b9;
  --scrollbar-width: 8px;
  --scrollbar-border-radius: 4px;
  --scrollbar-active-shadow: 0 0 6px rgba(52, 152, 219, 0.5);

  // accord√©on primeng
  --p-accordion-panel-border-color: var(--neutral-color);
  --p-accordion-header-active-background: var(--background-color);
  --p-accordion-header-active-color: var(--font-color);
  --p-accordion-content-border-color: var(--neutral-color);
  --p-accordion-content-background: var(--background-color);
  --p-accordion-content-color: var(--font-color);
  --p-accordion-content-padding: var(--padding);
  --p-accordion-panel-border-color: var(--neutral-color);
  --p-accordion-header-color: var(--font-color);
  --p-accordion-header-border-color: var(--neutral-color);
  --p-accordion-header-background: var(--background-color);
  --p-accordion-header-hover-color: var(--font-color);
  --p-accordion-header-hover-background: var(--background-color);
  --p-accordion-header-active-hover-background: var(--background-color);
  --p-accordion-content-padding: var(--padding);
  --p-accordion-header-padding: var(--padding);

  // p-float label
  --p-floatlabel-focus-color: var(--font-color);
  --p-floatlabel-color: var(--neutral-color);
  --p-floatlabel-active-font-size: 1rem;
  // input text
  --p-inputtext-color: var(--font-color);
  --p-inputtext-border-color: var(--neutral-color);

  // TreeTable
  --p-treetable-header-cell-border-color: var(--neutral-color);
  --p-treetable-row-selected-color: var(--font-color-invert);
  --p-treetable-body-cell-border-color: var(--neutral-color);
  --p-treetable-row-selected-color: var(--font-color);
  --p-treetable-row-selected-background: var(--background-color-lighter);
  --p-treetable-header-cell-selected-background: var(
    --background-color-lighter
  );
  --p-treetable-header-cell-selected-color: var(--font-color);
  --p-treetable-header-cell-color: var(--font-color);
  --p-treetable-sort-icon-color: var(--primary-color);
  --p-treetable-sort-icon-hover-color: var(--primary-color);

  // tabs
  --p-tabs-tab-background: var(--background-color-lighter);
  --p-tabs-tab-hover-background: var(--background-color-lighter);
  --p-tabs-tab-active-background: var(--background-color-lighter);

  --p-tabs-tab-gap: calc(var(--padding) / 2);
  --p-tabs-tab-border-color: var(--background-color-lighter);
  // --p-tabs-tab-active-border-color: var(--primary-color);
  --p-tabs-tab-active-color: var(--primary-color);
  // --p-tabs-tab-color: var(--font-color);
  --p-tabs-tab-focus-ring-color: var(--primary-color);
  --p-tabs-tablist-background: var(--background-color);
  --scrollbar-bg: var(--primary-color);

  --p-tabs-tabpanel-background: var(--background-color-lighter);
  --p-tabs-tabpanel-border-color: var(--background-color-lighter);
  --p-tabs-tabpanel-color: var(--font-color);
  --p-tabs-tabpanel-focus-ring-color: var(--primary-color);
  --p-tabs-active-bar-background: var(--primary-color);
  --p-tabs-tab-active-border-color: var(--background-color-lighter);
  --p-tabs-tab-hover-border-color: var(--background-color-lighter);
  --p-tabs-tab-padding: calc(var(--padding) / 2);

  // textarea
  --p-textarea-focus-border-color: var(--primary-color);
  --p-textarea-color: var(--font-color);
  --p-button-text-primary-color: var(--primary-color);

  //tab
  --p-datatable-body-cell-selected-border-color: var(--neutral-color);
  --p-datatable-row-selected-color: var(--primary-color);
  --p-datatable-row-selected-background: var(--primary-color-transparent-50);
  --p-datatable-row-focus-ring-color: var(--primary-color);
  --p-tabs-tab-hover-color: var(--font-color);

  //button
  --p-button-primary-focus-ring-color: var(--primary-color);
  --p-button-text-primary-hover-background: var(--primary-color-transparent-50);
  --p-button-text-primary-active-background: var(
    --primary-color-transparent-50
  );

  --p-button-success-background: var(--success-color);
  --p-button-success-border-color: var(--success-color);

  //select
  --p-select-disabled-background: light-dark(
    rgba(239, 239, 239, 0.3),
    rgba(19, 1, 1, 0.3)
  );
  --p-select-focus-border-color: var(--primary-color);
  --p-select-option-selected-focus-background: var(
    --primary-color-transparent-50
  );
  --p-select-option-selected-background: var(--primary-color-transparent-50);
  --p-select-option-selected-color: var(--primary-color);
  --p-select-option-hover-background: var(--primary-color-transparent-50);
  --p-select-option-selected-focus-color: var(--primary-color);
  --p-select-color: var(--font-color);
  --p-select-overlay-color: var(--font-color);
  --p-select-option-focus-color: var(--font-color);
  --p-select-option-focus-background: var(--background-color-lighter);
  --p-select-overlay-color: var(--font-color);
  --p-select-option-color: var(--font-color);

  //checkbox
  --p-checkbox-checked-background: var(--primary-color);
  --p-checkbox-checked-border-color: var(--primary-color);
  --p-checkbox-checked-hover-background: var(--neutral-color);
  --p-checkbox-checked-hover-border-color: var(--neutral-color);

  --p-surface-900: var(--background-color);
  --p-surface-950: var(--background-color-lighter);
  --p-transition-duration: 0.1s;

  //fieldset
  --p-fieldset-background: var(--background-color);
  --p-fieldset-border-color: var(--neutral-color);
  --p-fieldset-color: var(--font-color);
  --p-fieldset-padding: 10px;
  --p-fieldset-legend-padding: 5px;
  --p-fieldset-legend-background: var(--background-color-lighter);

  //multi-select
  --p-multiselect-border-color: var(--neutral-color);
  --p-multiselect-focus-border-color: var(--primary-color);
  --p-multiselect-option-focus-color: var(--font-color);
  --p-multiselect-option-focus-background: var(--font-color);
  --p-multiselect-option-focus-background: var(--background-color-lighter);
  --p-multiselect-option-color: var(--font-color);
  --p-multiselect-color: var(--font-color);

  //p-tree
  --p-tree-background: var(--background-color-lighter);
  --p-tree-node-selected-background: var(--primary-color-transparent-50);
  --p-tree-node-selected-color: var(--primary-color);
  --p-tree-node-icon-selected-color: var(--neutral-color);
  --p-tree-node-color: var(--font-color);
  --p-tree-node-hover-background: transparent;
  --p-tree-node-hover-color: var(--font-color);

  //danger button
  --p-button-danger-background: var(--danger-color);
  --p-button-danger-border-color: var(--danger-color);
  --p-button-danger-color: var(--font-color);
  --p-button-text-danger-color: var(--danger-color);

  // secondary button
  --p-button-secondary-background: transparent;
  --p-button-secondary-border-color: var(--neutral-color);
  --p-button-secondary-color: var(--font-color);
  --p-button-secondary-hover-background: transparent;
  --p-button-secondary-hover-border-color: var(--font-color);
  --p-button-secondary-hover-color: var(--font-color);

  //button link
  --p-button-link-color: var(--primary-color);
  --p-button-link-hover-color: var(--primary-color);

  --p-button-success-color: var(--font-color-invert);

  // p-avatar
  --p-avatar-background: var(--background-color-lighter);
  --p-avatar-color: var(--font-color);

  // dark mode
  --p-surface-0: var(--background-color-lighter);
  --p-button-text-danger-hover-background: color-mix(
    in srgb,
    var(--p-red-400),
    transparent 96%
  );
  --p-button-text-help-hover-background: color-mix(
    in srgb,
    var(--p-purple-400),
    transparent 96%
  );
  --p-toast-success-detail-color: var(--font-color);
  --p-toast-error-detail-color: var(--font-color);
  --p-confirmdialog-icon-color: var(--font-color);
  --p-toast-info-detail-color: var(--font-color);

  // tooltip
  // --p-tooltip-background: var(--background-color-lighter);
  --p-tooltip-color: var(--font-color);
  --p-tooltip-max-width: 300px;

  // input number
  --p-inputnumber-button-hover-background: var(--primary-color);
  --p-editor-content-color: var(--font-color);

  //p-editor
  --p-editor-toolbar-item-hover-color: var(--primary-color);
  --p-editor-toolbar-item-color: var(--font-color);
  --p-editor-toolbar-item-active-color: var(--primary-color);
  --p-editor-overlay-border-color: var(--neutral-color);
  --p-editor-overlay-option-color: var(--font-color);
  --p-editor-overlay-option-focus-color: var(--font-color);
  --p-editor-overlay-option-focus-background: var(--background-color-lighter);
  --p-editor-content-border-color: var(--neutral-color);
  --p-editor-toolbar-border-color: var(--neutral-color);

  // card
  --p-card-color: var(--font-color);

  // range
  --p-slider-range-background: var(--primary-color);

  // password overlay
  --p-password-overlay-color: var(--font-color);

  // contexte menu
  --p-contextmenu-color: var(--font-color);
  --p-contextmenu-item-color: var(--font-color);
  --p-contextmenu-item-focus-background: var(--background-color-lighter);
  --p-contextmenu-item-focus-color: var(--font-color);

  // popover
  --p-popover-color: var(--font-color);

  // autocomplete
  --p-autocomplete-focus-border-color: var(--primary-color);
  --p-autocomplete-border-color: var(--neutral-color);
  --p-autocomplete-color: var(--font-color);
  --p-autocomplete-option-focus-color: var(--font-color);
  --p-autocomplete-option-focus-background: var(--background-color-lighter);
  --p-autocomplete-option-selected-focus-background: var(
    --background-color-lighter
  );
  --p-autocomplete-option-selected-background: var(--background-color-lighter);
  --p-chip-background: var(--background-color);
  --p-chip-color: var(--font-color);
  --p-chip-remove-icon-color: var(--danger-color);
  --p-autocomplete-option-color: var(--font-color);
  --p-autocomplete-dropdown-background: var(--background-color);
  --p-autocomplete-overlay-color: var(--font-color);

  --neutral-color-transparent: rgba(var(--neutral-color-rgb), 0.2); // Exemple
  --font-secondary-color: var(--neutral-color);

  // treeselect
  --p-tree-node-toggle-button-color: var(--font-color);
  --p-tree-node-focus-ring-color: var(--primary-color);
  --p-treeselect-color: var(--font-color);
  --p-treeselect-focus-border-color: var(--primary-color);
}

html,
body {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  background-color: var(--background-color);
}
.p-autocomplete-input-multiple {
  padding: calc(var(--padding) / 2);
}

body {
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
  padding-top: 70px; // Compensation pour le header fixe
}

// Supprime le padding quand on est en mode auth (pas de header)
body.auth-mode {
  padding-top: 0 !important;
}

body.resizing {
  cursor: col-resize !important;
  user-select: none !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
}

body.resizing * {
  cursor: col-resize !important;
  user-select: none !important;
}

body.resizing a,
body.resizing button,
body.resizing [role="button"],
body.resizing input,
body.resizing select,
body.resizing [contenteditable="true"] {
  pointer-events: none !important;
}

/* Pour Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb-bg) transparent;
}

/* Pour Chrome, Edge, et Safari */
::-webkit-scrollbar {
  width: var(--scrollbar-width);
  height: var(--scrollbar-width);
  background-color: transparent;
}

::-webkit-scrollbar-track {
  background: var(--scrollbar-bg);
  border-radius: var(--scrollbar-border-radius);
  margin: 2px;
}

::-webkit-scrollbar-thumb {
  background: var(--scrollbar-thumb-bg);
  border-radius: var(--scrollbar-border-radius);
  transition: background 0.2s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--scrollbar-thumb-hover);
}

::-webkit-scrollbar-thumb:active {
  background: var(--scrollbar-thumb-hover);
  box-shadow: var(--scrollbar-active-shadow);
}

::-webkit-scrollbar-button {
  display: none;
}

.biblioteque-wrapper .container_biblio,
.scrollable-content {
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb-bg) transparent;
  overflow-y: auto;
}

@keyframes scrollbarFadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

::-webkit-scrollbar-thumb {
  animation: scrollbarFadeIn 0.3s ease;
}

@media (pointer: coarse) {
  :root {
    --scrollbar-width: 12px;
  }
}

.dark-theme {
  --scrollbar-bg: transparent;
  --scrollbar-thumb-bg: #2c3e50;
  --scrollbar-thumb-hover: #34495e;
  --scrollbar-active-shadow: 0 0 6px rgba(52, 73, 94, 0.5);
}

.custom-scrollbar {
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--scrollbar-thumb-bg) transparent;
}

.horizontal-scroll {
  overflow-x: auto;
  overflow-y: hidden;
  white-space: nowrap;
}

.container-label {
  display: flex;
  flex-direction: column;
  gap: calc(var(--padding) / 4);
}
.read-only-element {
  opacity: 0.6;
  pointer-events: none;
  cursor: not-allowed;
}

.read-only-container {
  position: relative;

  &::after {
    content: "Lecture seule";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: rgba(var(--danger-color-rgb), 0.8);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8rem;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
  }

  &:hover::after {
    opacity: 1;
  }
}

.read-only-notice {
  background-color: rgba(var(--danger-color-rgb), 0.15);
  color: var(--danger-color);
  padding: 8px 12px;
  border-radius: 6px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 15px;
  width: fit-content;
}

app-auth {
  height: 100%;
}