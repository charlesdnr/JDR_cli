@let $module = currentModule(); @let $currentBlocks = currentVersion()?.blocks;
@if($module){
<div class="toolbar">
  <p-tabs value="0">
    <p-tablist>
      <p-tab value="0"> {{ "Paramètres" | translate }} </p-tab>
      <p-tab value="1"> {{ "Blocks" | translate }} </p-tab>
    </p-tablist>
    <p-tabpanels>
      <p-tabpanel value="0">
        @if(currentVersion() !== undefined){
        <app-project-parameters
          [currentModule]="$module"
          [currentUser]="currentUser()"
          [(currentGameSystem)]="currentGameSystem"
          (saveRequested)="save()"
          [loadingSave]="loadingSave()"
          (generateModuleRequested)="generateCompleteModule()"
          (deleteRequested)="deleteModule()"
          [currentVersion]="currentVersion()!"
          (currentVersionChange)="this.currentVersion.set($event)"
        ></app-project-parameters>
        }
      </p-tabpanel>
      <p-tabpanel value="1">
        <app-block-types-toolbar
          [availableBlocks]="availableBlocks"
          [isDraggingIcon]="isDraggingIcon()"
          [dragPosition]="dragPosition"
          [draggedIconType]="draggedIconType"
          (blockDragStarted)="startIconDrag($event)"
        ></app-block-types-toolbar>
      </p-tabpanel>
    </p-tabpanels>
  </p-tabs>
</div>
<div class="container-edit">
  <div class="editor">
    @if($currentBlocks && $currentBlocks.length === 0 && !isDraggingIcon()){
    <div class="container-empty">
      <ng-lottie height="30rem" [options]="options" />
      <h1>{{ "Glisse et dépose un block pour commencer !" | translate }}</h1>
    </div>
    } @if($currentBlocks){
    <app-block-list
      [style.height]="$currentBlocks.length === 0 && !isDraggingIcon() ? '0':'100%'"
      [blocks]="$currentBlocks"
      [isDraggingIcon]="isDraggingIcon()"
      [isOverDropZone]="isOverDropZone()"
      [draggedIconType]="draggedIconType"
      [insertPosition]="insertPosition()"
      (blockDropped)="onDrop($event)"
      (blockRemoved)="removeBlock($event)"
      (generateAIContent)="generateAIContent($event)"
    ></app-block-list>
    }
  </div>
</div>
}
<p-confirmDialog />
